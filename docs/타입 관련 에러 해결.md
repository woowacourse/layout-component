## ReactNode, ReactElement 관련 에러 발생

### ReactElement로 하였을 때

const Grid << 이 부분에서 타입 에러가 납니다. 에러는 ForwardRefExoticComponent의 반환 값이 ReactNode에 해당하지 않아서 에러가 나는 것이였습니다.

```tsx
type GridComponent = <T extends ElementType>(
  props: GridProps<T>
) => ReactElement | null;

const Grid : GridComponent = forwardRef(function Grid<
```

```
Type 'ForwardRefExoticComponent<Omit<GridProps<ElementType>, "ref"> & RefAttributes<unknown>>' is not assignable to type 'GridComponent'.
  Type 'ReactNode' is not assignable to type 'ReactElement<any, string | JSXElementConstructor<any>> | null'.ts(2322)
```

### 해결 방법

@types/react의 파일에서 forwardRef의 반환 값의 타입을 수정하여 타입 에러를 해결했습니다. ExoticComponent의 타입 코드 중 (props: P): ReactNode; 을 (props: P): ReactElement | null; 으로 수정하였습니다.

이 방법의 단점으로는 node_modules를 다른 컴퓨터에서 설치 후 작업할 때 동일한 과정을 해줘야 한다는 단점이 있습니다.

```tsx
function forwardRef<T, P = {}>(
  render: ForwardRefRenderFunction<T, P>
): ForwardRefExoticComponent<PropsWithoutRef<P> & RefAttributes<T>>;

// ForwardRefExoticComponent을 타고 들어갑니다.
interface ForwardRefExoticComponent<P> extends NamedExoticComponent<P> {
  defaultProps?: Partial<P> | undefined;
  propTypes?: WeakValidationMap<P> | undefined;
}

// NamedExoticComponent을 타고 들어갑니다.
interface NamedExoticComponent<P = {}> extends ExoticComponent<P> {
  displayName?: string | undefined;
}

// ExoticComponent을 타고 들어갑니다.
interface ExoticComponent<P = {}> {
  /**
   * **NOTE**: Exotic components are not callable.
   */

  (props: P): ReactNode; //  => (props: P): ReactElement | null;

  readonly $$typeof: symbol;
}
```

### ReactNode로 하였을 때

컴파일러 과정에서는 오류가 나지 않습니다. forwardRef의 반환 값과 일치하기 때문입니다.

```tsx
type ContainerComponent = <T extends ElementType>(
  props: ContainerProps<T>
) => ReactNode | null;

const Container: ContainerComponent = forwardRef(
```

하지만 npm 배포 후 설치를 한다면 타입 에러가 사용자에게 납니다. 따라서 사용자가 타입 에러로 인해 잘못된 패키지를 설치했다고 생각이 들고, 직접 패키지의 타입을 수정하지 않는 이상 사용을 할 수 없는 일이 발생합니다.

```
JSX 문법에서는 컴포넌트의 반환 값이 유효한 JSX 엘리먼트 타입이어야 하기 때문에, 'Container' 컴포넌트의 반환 타입이 'ReactNode'라고 하더라도 JSX 엘리먼트로 사용할 수 없는 경우에 이러한 에러가 발생합니다.

또한, 'undefined' 타입은 JSX 엘리먼트로 사용될 수 없고, 'Element' 또는 'null' 타입에만 할당할 수 있기 때문에, 'Container' 컴포넌트의 반환 값이 'undefined'인 경우에도 에러가 발생합니다.
```

```tsx
import { Container } from 'wus-layout-component';

export default function Example() {
  return <Container as="animate">asds</Container>;
}
```

```
'Container' cannot be used as a JSX component.
  Its return type 'ReactNode' is not a valid JSX element.
    Type 'undefined' is not assignable to type 'Element | null'.ts(2786)
```

### 결론

@types/react의 타입의 반환 값 타입을 직접 변경하여 사용하기로 했습니다. 패키지를 설치했는데 타입 에러가 난다면 사용자의 신뢰가 떨어져서 사용을 하지 않을 것이기 때문입니다.
